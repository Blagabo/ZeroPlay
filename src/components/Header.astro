---
import { supabase } from "@lib/supabase"

const {
	data: { user },
} = await supabase.auth.getUser()
const isLogin = !!user
---

<header class="fixed left-0 right-0 top-0 z-50">
	<nav class="glass border-b border-white/10">
		<div class="m-2 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
			<div class="flex h-16 items-center justify-between">
				<div class="flex-shrink-0">
					<a href="/" class="flex items-center">
						<span class="text-4xl font-bold text-white">
							Zero<span class="text-primary-500">Play</span>
						</span>
					</a>
				</div>

				<div class="hidden md:block">
					<div class="ml-10 flex items-center space-x-8">
						<a href="/#planes" class="text-white/80 transition-colors hover:text-white"> Planes </a>
						<a href="/setup-guide" class="text-white/80 transition-colors hover:text-white">
							Guia de Instalacion
						</a>
						<a href="/#faq" class="text-white/80 transition-colors hover:text-white"> FAQ </a>
						<a
							href="https://ig.me/m/zeroplay.tv"
							target="_blank"
							class="text-white/80 transition-colors hover:text-white"
						>
							Contactar
						</a>
						{
							isLogin ? (
								<a
									href="/dashboard"
									class="rounded-lg bg-primary-500 px-4 py-2 font-medium text-dark-500 transition-colors hover:bg-primary-600"
								>
									Dashboard
								</a>
							) : (
								<a
									href="/signin"
									class="rounded-lg bg-primary-500 px-4 py-2 font-medium text-dark-500 transition-colors hover:bg-primary-600"
								>
									Login
								</a>
							)
						}
					</div>
				</div>

				<div class="md:hidden">
					<button
						id="mobile-menu-button"
						class="text-white transition-colors hover:text-primary-400"
					>
						<svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M4 6h16M4 12h16M4 18h16"></path>
						</svg>
					</button>
				</div>
			</div>
		</div>

		<div id="mobile-menu" class="hidden md:hidden">
			<div class="glass space-y-1 border-t border-white/10 px-2 pb-3 pt-2">
				<a href="/#planes" class="block px-3 py-2 text-white/80 transition-colors hover:text-white">
					Planes
				</a>
				<a
					href="/setup-guide"
					class="block px-3 py-2 text-white/80 transition-colors hover:text-white"
				>
					Guia de Instalacion
				</a>
				<a href="#faq" class="block px-3 py-2 text-white/80 transition-colors hover:text-white">
					FAQ
				</a>
				<a
					href="https://ig.me/m/zeroplay.tv"
					target="_blank"
					class="block px-3 py-2 text-white/80 transition-colors hover:text-white"
				>
					Contactar
				</a>
				<a
					href="/dashboard"
					class="block px-3 py-2 text-primary-400 transition-colors hover:text-primary-500"
				>
					Dashboard
				</a>
			</div>
		</div>
	</nav>
</header>

<script>
	const mobileMenuButton = document.getElementById("mobile-menu-button")
	const mobileMenu = document.getElementById("mobile-menu")

	mobileMenuButton?.addEventListener("click", () => {
		mobileMenu?.classList.toggle("hidden")
	})

	const mobileLinks = mobileMenu?.querySelectorAll("a")
	mobileLinks?.forEach((link) => {
		link.addEventListener("click", () => {
			mobileMenu?.classList.add("hidden")
		})
	})
</script>
