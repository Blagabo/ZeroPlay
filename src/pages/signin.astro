---
import Layout from "../layouts/Layout.astro"
import Header from "../components/Header.astro"
import Footer from "../components/Footer.astro"

const { cookies, redirect } = Astro

const accessToken = cookies.get("sb-access-token")
const refreshToken = cookies.get("sb-refresh-token")

if (accessToken && refreshToken) {
	return redirect("/dashboard")
}
---

<Layout title="Iniciar sesión - ZeroPlay">
	<Header />
	<main class="min-h-screen px-4 pt-32">
		<div class="mx-auto max-w-md">
			<div class="glass rounded-2xl p-8">
				<h1 class="mb-6 text-center text-3xl font-bold text-white">Iniciar sesión</h1>
				<p class="mb-8 text-center text-white/80">
					¿Nuevo aquí? <a href="/register" class="text-primary-500 hover:text-primary-400"
						>Crea una cuenta</a
					>
				</p>
				<form action="/api/auth/signin" method="post" class="space-y-6">
					<div>
						<label for="email" class="mb-2 block text-sm font-medium text-white"
							>Correo electrónico</label
						>
						<input
							type="email"
							name="email"
							id="email"
							required
							class="w-full rounded-lg border border-white/10 bg-white/5 px-4 py-2 text-white placeholder-white/50 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20"
							placeholder="tu@email.com"
						/>
					</div>
					<div>
						<label for="password" class="mb-2 block text-sm font-medium text-white"
							>Contraseña</label
						>
						<input
							type="password"
							name="password"
							id="password"
							required
							class="w-full rounded-lg border border-white/10 bg-white/5 px-4 py-2 text-white placeholder-white/50 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/20"
							placeholder="••••••••"
						/>
					</div>
					<button
						type="submit"
						class="w-full rounded-lg bg-primary-500 px-4 py-2 font-semibold text-white transition-colors hover:bg-primary-600"
					>
						Iniciar sesión
					</button>
				</form>
			</div>
		</div>
	</main>
	<Footer />
</Layout>
